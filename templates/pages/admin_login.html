{% extends 'base.html' %}
{% load static %}
{% block title %}Admin Login - DailyVotion{% endblock %}
{% block hide_navbar %}navbar-hidden{% endblock %}
{% block head_css %}
<link rel="stylesheet" href="{% static 'css/Admin/Adminlogin.css' %}">
{% endblock %}
{% block corner_menu %}
<!-- Corner menu button for auth pages -->
<button id="auth-menu-button" class="homepage-menu-button" aria-label="Menu">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="white"/>
  </svg>
</button>
{% endblock %}
{% block content %}
<div class="adminlogin-container">
  <div class="adminlogin-main">
    <div class="adminlogin-paper">
      <h2 class="adminlogin-title">Admin Login</h2>
  <p class="adminlogin-note">For security, you must pass Admin Authentication before accessing this page.</p>
      {% if messages %}
        <ul class="messages">
          {% for message in messages %}
            <li class="{{ message.tags }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
      <form method="post">
        {% csrf_token %}
        <input type="email" name="email" placeholder="Email" required />
        <div class="adminlogin-password-field">
          <input type="password" name="password" placeholder="Password" id="apwd" required />
          <span class="adminlogin-eye" id="apwd-eye" role="button">👁️‍🗨️</span>
        </div>
        <div class="adminlogin-options">
          <label><input type="checkbox" name="remember" /> Remember me</label>
          <button type="button" class="adminlogin-forgot">Forgot password?</button>
        </div>
        <button type="submit" class="adminlogin-loginbtn">Login</button>
      </form>
      <div class="adminlogin-divider"></div>
      <div class="adminlogin-register">
        <span class="adminlogin-register-title">New administrator account?</span><br />
        <a class="adminlogin-createbtn" href="{% url 'admin_register' %}">Create Admin Account</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Corner menu setup
    const menuButton = document.getElementById('auth-menu-button');
    
    if (menuButton) {
      // Create a dropdown menu
      const menu = document.createElement('div');
      menu.className = 'auth-dropdown-menu';
      menu.style.position = 'fixed';
      menu.style.top = '80px';
      menu.style.right = '20px';
      menu.style.backgroundColor = '#008b8b';
      menu.style.borderRadius = '8px';
      menu.style.padding = '10px 0';
      menu.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.2)';
      menu.style.zIndex = '1100';
      menu.style.display = 'none';
      
      // Create menu items
      const menuItems = [
        { text: 'Home', url: '{% url "home" %}' },
        { text: 'Login', url: '{% url "login" %}' },
        { text: 'Register', url: '{% url "register" %}' },
        { text: 'Admin', url: '{% url "admin_login" %}' },
        { text: 'About', url: '{% url "about" %}' }
      ];
      
      const menuList = document.createElement('ul');
      menuList.style.listStyle = 'none';
      menuList.style.margin = '0';
      menuList.style.padding = '0';
      
      menuItems.forEach(item => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = item.url;
        a.textContent = item.text;
        a.style.color = 'white';
        a.style.textDecoration = 'none';
        a.style.padding = '10px 20px';
        a.style.display = 'block';
        a.style.fontWeight = 'bold';
        a.style.whiteSpace = 'nowrap';
        
        a.addEventListener('mouseover', function() {
          this.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
        });
        
        a.addEventListener('mouseout', function() {
          this.style.backgroundColor = 'transparent';
        });
        
        li.appendChild(a);
        menuList.appendChild(li);
      });
      
      menu.appendChild(menuList);
      document.body.appendChild(menu);
      
      // Toggle menu visibility
      menuButton.addEventListener('click', function() {
        if (menu.style.display === 'none') {
          menu.style.display = 'block';
        } else {
          menu.style.display = 'none';
        }
      });
      
      // Close menu when clicking outside
      document.addEventListener('click', function(e) {
        if (e.target !== menuButton && !menuButton.contains(e.target) && !menu.contains(e.target)) {
          menu.style.display = 'none';
        }
      });
    }

    // Eye toggle
    const eye = document.getElementById('apwd-eye');
    const pwd = document.getElementById('apwd');
    if (eye && pwd) eye.addEventListener('click', ()=>{ if (pwd.type==='password'){pwd.type='text'; eye.textContent='👁️';} else {pwd.type='password'; eye.textContent='👁️‍🗨️';} });
  });
</script>
{% endblock %}
